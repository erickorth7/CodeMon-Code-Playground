<!DOCTYPE html>

<html>

<head>

  <title>CodeMon Code Playground</title>

  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">

</head>

<body>
  <!--    Left off at 30 minute mark!-->

  <div id="header">

    <div id="logo">

      <h1>CodeMon</h1>
    </div>

    <h4 id="logo2">Code Playground</h4>


    <div id="buttonContainer">

      <div class="toggleButton active" id="html">HTML</div>
      <div class="toggleButton" id="css">CSS</div>
      <div class="toggleButton" id="javascript">Javascript</div>
      <div class="toggleButton active" id="output">Output</div>


    </div>

  </div>

  <div id="bodyContainer">

    <textarea id="htmlTextAreaPanel" class="panel"><p id = "paragraph">Hello! Welcome to CodeMon! Click on the boxes above to enter your HTML, CSS, and Javascript code and see what you can make!</p></textarea>

    <textarea id="cssTextAreaPanel" class="panel hidden">p {color: black;}</textarea>

    <textarea id="javascriptTextAreaPanel" class="panel hidden">var welcome = "Welcome to CodeMon!"</textarea>

    <iframe id="outputPanel" class="panel"></iframe>


  </div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script type=text/javascript> function updateOutput() { $("iframe").contents().find("html").html("<html><head><style type='text/css'>" + $("#cssTextAreaPanel").val() + "</style></head><body>" + $("#htmlTextAreaPanel").val() + "</body></html>");

             document.getElementById("outputPanel").contentWindow.eval($("#javascriptTextAreaPanel").val());
            }

            $(".toggleButton").hover(function() {

               $(this).addClass("highlightedButton");

            }, function() {

                $(this).removeClass("highlightedButton");

            });

            $(".toggleButton").click(function() {

               $(this).toggleClass("active");

              var panelId = $(this).attr("id");


        $("#" + panelId + "TextAreaPanel").toggleClass("hidden");

                var numberOfActivePanels = 4 - $(".hidden").length;

                $(".panel").width(($(window).width() / numberOfActivePanels) - 10);

            });

            $(".panel").height($(window).height() - $("#header").height() -15);

            $(".panel").width(($(window).width() / 2) - 10);

            updateOutput();

            $("iframe").contents().find("html").html($("#htmlTextAreaPanel").val());

            $("textarea").on('change keyup paste', function() {

             updateOutput();
            });


        </script>


</body>


</html>
